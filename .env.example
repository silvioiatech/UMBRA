# UMBRA Platform Configuration
# Copy this file to .env and configure your values

# ============================================================================
# CORE SYSTEM CONFIGURATION
# ============================================================================

# Timezone and Localization
LOCALE_TZ=Europe/Zurich
PRIVACY_MODE=strict
RATE_LIMIT_PER_MIN=20

# Application Port (Railway sets this automatically)
PORT=8000

# Environment
NODE_ENV=production
DEBUG=false

# ============================================================================
# TELEGRAM BOT CONFIGURATION (REQUIRED)
# ============================================================================

# Telegram Bot Token from @BotFather
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# User Access Control (JSON arrays)
ALLOWED_USER_IDS=["123456789", "987654321"]
ALLOWED_ADMIN_IDS=["123456789"]

# Bot Configuration
TELEGRAM_WEBHOOK_URL=https://your-app.railway.app/webhook
TELEGRAM_POLLING_ENABLED=true

# ============================================================================
# OPENROUTER AI CONFIGURATION (REQUIRED)
# ============================================================================

# OpenRouter API Key
OPENROUTER_API_KEY=sk-or-v1-your_api_key_here

# Default Model Configuration
OPENROUTER_DEFAULT_MODEL=anthropic/claude-3.5-sonnet:beta

# Role-specific Model Overrides (optional)
OPENROUTER_USER_MODEL=anthropic/claude-3.5-sonnet:beta
OPENROUTER_ADMIN_MODEL=anthropic/claude-3.5-sonnet:beta

# AI Policy Settings
AI_POLICY=sparring
AI_DAILY_COST_CAP_CHF=10.0
AI_TIMEOUT_MS=30000

# ============================================================================
# CLOUDFLARE R2 STORAGE CONFIGURATION (REQUIRED)
# ============================================================================

# R2 Credentials
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET=umbra-storage
R2_ENDPOINT=https://your-account.r2.cloudflarestorage.com

# R2 Configuration
R2_REGION=auto
R2_PUBLIC_URL_BASE=https://your-bucket.your-account.r2.dev

# ============================================================================
# CREATOR MODULE - IMAGE GENERATION
# ============================================================================

# Primary Image Provider (stability|openai|replicate)
CREATOR_IMAGE_PROVIDER=stability

# Stability AI
CREATOR_STABILITY_API_KEY=sk-your_stability_api_key

# OpenAI (for DALL-E)
CREATOR_OPENAI_API_KEY=sk-your_openai_api_key

# Replicate
CREATOR_REPLICATE_API_TOKEN=r8_your_replicate_token

# ============================================================================
# CREATOR MODULE - VIDEO GENERATION
# ============================================================================

# Primary Video Provider (pika|runway|replicate)
CREATOR_VIDEO_PROVIDER=pika

# Pika Labs
CREATOR_PIKA_API_KEY=pika_your_api_key

# Runway ML
CREATOR_RUNWAY_API_KEY=rw_your_runway_key

# ============================================================================
# CREATOR MODULE - TEXT-TO-SPEECH
# ============================================================================

# Primary TTS Provider (elevenlabs|openai)
CREATOR_TTS_PROVIDER=elevenlabs

# ElevenLabs
CREATOR_ELEVENLABS_API_KEY=your_elevenlabs_api_key

# ============================================================================
# CREATOR MODULE - MUSIC GENERATION
# ============================================================================

# Primary Music Provider (suno|replicate)
CREATOR_MUSIC_PROVIDER=suno

# Suno AI
CREATOR_SUNO_API_KEY=your_suno_api_key

# ============================================================================
# CREATOR MODULE - SPEECH RECOGNITION
# ============================================================================

# Primary ASR Provider (deepgram|openai)
CREATOR_ASR_PROVIDER=deepgram

# Deepgram
CREATOR_DEEPGRAM_API_KEY=your_deepgram_api_key

# ============================================================================
# PRODUCTION MODULE - N8N INTEGRATION
# ============================================================================

# Main n8n Instance URL
MAIN_N8N_URL=https://your-n8n.railway.app

# n8n Authentication (if required)
N8N_API_KEY=your_n8n_api_key
N8N_WEBHOOK_SECRET=your_webhook_secret

# N8n MCP Server Configuration (Railway-hosted)
# Use the czlonkowski/n8n-mcp-railway container
N8N_MCP_SERVER_URL=https://your-n8n-mcp.railway.app
N8N_MCP_API_KEY=your_mcp_api_key
N8N_MCP_AUTH_TOKEN=your_mcp_auth_token

# ============================================================================
# SWISS ACCOUNTANT MODULE
# ============================================================================

# OCR Configuration
OCR_ENGINE=tesseract
OCR_LANGS=deu+fra+ita+eng
MAX_DOC_SIZE_MB=20
ALLOWED_DOC_TYPES=pdf,jpg,jpeg,png,xml,csv,xlsx

# Export Security
EXPORT_PASSWORD_REQUIRED=false

# ============================================================================
# CONCIERGE MODULE - VPS MANAGEMENT
# ============================================================================

# VPS Connection (for Concierge module)
VPS_HOST=your.vps.hostname
VPS_USER=ubuntu
VPS_SSH_KEY_PATH=/path/to/ssh/key
VPS_PORT=22

# Docker Configuration
DOCKER_SOCKET_PATH=/var/run/docker.sock

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# RBAC Configuration
RBAC_PERMISSIONS_FILE=/config/custom_permissions.json

# Session Management
SESSION_SECRET=your_session_secret_key_here
SESSION_TIMEOUT_MINUTES=60

# ============================================================================
# AUDIT SYSTEM
# ============================================================================

# Audit Configuration
AUDIT_ENABLED=true
AUDIT_LOCAL_STORAGE_ENABLED=true
AUDIT_CLOUD_STORAGE_ENABLED=true
AUDIT_COMPRESSION_ENABLED=true

# Audit Storage Paths
AUDIT_LOCAL_PATH=./audit_logs
AUDIT_R2_BUCKET=umbra-audit-logs
AUDIT_R2_ENDPOINT=https://your-account.r2.cloudflarestorage.com
AUDIT_R2_ACCESS_KEY=your_audit_r2_access_key
AUDIT_R2_SECRET_KEY=your_audit_r2_secret_key
AUDIT_R2_REGION=auto

# Audit Processing
AUDIT_ASYNC_ENABLED=true
AUDIT_QUEUE_SIZE=10000

# ============================================================================
# METRICS & MONITORING
# ============================================================================

# Metrics Server Configuration
METRICS_SERVER_ENABLED=true
METRICS_SERVER_HOST=0.0.0.0
METRICS_SERVER_PORT=9090

# Metrics Authentication
METRICS_AUTH_ENABLED=true
METRICS_ALLOWED_TOKENS=["metrics_token_1", "metrics_token_2"]

# Metrics Features
METRICS_DOCS_ENABLED=true
METRICS_CORS_ENABLED=true
METRICS_CORS_ORIGINS=["*"]
METRICS_ACCESS_LOG_ENABLED=false

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log Level
LOG_LEVEL=INFO

# Structured Logging
LOGGING_FORMAT=json
LOGGING_INCLUDE_REQUEST_ID=true

# Log Redaction
REDACTION_CHAR=*
PRESERVE_LENGTH=true
MIN_PRESERVE_LENGTH=3

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# SQLite Database (F4R2 architecture)
DATABASE_URL=sqlite:///./umbra.db
DATABASE_POOL_SIZE=20
DATABASE_ECHO=false

# ============================================================================
# HTTP SERVER CONFIGURATION
# ============================================================================

# FastAPI Configuration
API_TITLE=UMBRA Platform
API_VERSION=1.0.0
API_DOCS_ENABLED=true

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS=["*"]
CORS_ALLOW_CREDENTIALS=true

# Request Limits
MAX_REQUEST_SIZE_MB=100
REQUEST_TIMEOUT_SECONDS=300

# ============================================================================
# DEVELOPMENT & TESTING
# ============================================================================

# Development Mode
DEV_MODE=false
DEV_SKIP_AUTH=false
DEV_MOCK_PROVIDERS=false

# Testing Configuration
TEST_MODE=false
TEST_DATABASE_URL=sqlite:///./test_umbra.db
TEST_SKIP_EXTERNAL_APIS=true

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Module Feature Flags
SWISS_ACCOUNTANT_ENABLED=true
CREATOR_ENABLED=true
CONCIERGE_ENABLED=true
BUSINESS_ENABLED=true
PRODUCTION_ENABLED=true
GENERAL_CHAT_ENABLED=true

# Security Features
SECURITY_INTEGRATION_ENABLED=true
RBAC_ENABLED=true
AUDIT_ENABLED=true
METRICS_ENABLED=true

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Worker Configuration
WORKER_PROCESSES=1
WORKER_CONNECTIONS=1000
WORKER_TIMEOUT=300

# Cache Configuration
CACHE_ENABLED=true
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE_MB=100

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10

# ============================================================================
# RAILWAY SPECIFIC CONFIGURATION
# ============================================================================

# Railway automatically sets these variables:
# RAILWAY_STATIC_URL
# RAILWAY_PUBLIC_DOMAIN
# RAILWAY_PRIVATE_DOMAIN
# RAILWAY_PROJECT_ID
# RAILWAY_ENVIRONMENT_ID
# RAILWAY_SERVICE_ID

# Use Railway domain for webhooks
WEBHOOK_BASE_URL=${RAILWAY_PUBLIC_DOMAIN}

# ============================================================================
# BACKUP & MAINTENANCE
# ============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE_CRON=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_R2_BUCKET=umbra-backups

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System maintenance in progress

# ============================================================================
# NOTIFICATIONS
# ============================================================================

# Email Notifications (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM=UMBRA Platform <noreply@yourdomain.com>

# Admin Notifications
ADMIN_EMAIL=admin@yourdomain.com
ALERT_EMAIL_ENABLED=false

# ============================================================================
# COMPLIANCE & LEGAL
# ============================================================================

# Data Retention
DATA_RETENTION_DAYS=365
AUTO_DELETE_EXPIRED_DATA=false

# Privacy Settings
GDPR_COMPLIANCE_MODE=true
DATA_PROCESSING_CONSENT_REQUIRED=true
COOKIE_CONSENT_REQUIRED=false

# Terms & Conditions
TERMS_URL=https://yourdomain.com/terms
PRIVACY_POLICY_URL=https://yourdomain.com/privacy

# ============================================================================
# EXTERNAL INTEGRATIONS
# ============================================================================

# Webhook URLs for external systems
EXTERNAL_WEBHOOK_URL=https://your-external-system.com/webhook

# API Keys for external services
EXTERNAL_SERVICE_API_KEY=your_external_service_key

# ============================================================================
# DEBUGGING & DIAGNOSTICS
# ============================================================================

# Debug Flags
DEBUG_SQL=false
DEBUG_HTTP_REQUESTS=false
DEBUG_AI_RESPONSES=false
DEBUG_R2_OPERATIONS=false

# Performance Monitoring
ENABLE_PROFILING=false
PROFILE_SLOW_REQUESTS=true
SLOW_REQUEST_THRESHOLD_MS=1000

# Error Tracking
ERROR_TRACKING_ENABLED=true
ERROR_TRACKING_DSN=https://your-sentry-dsn

# ============================================================================
# END OF CONFIGURATION
# ============================================================================

# Note: Remember to:
# 1. Copy this file to .env
# 2. Replace all placeholder values with your actual credentials
# 3. Never commit .env to version control
# 4. Use Railway's environment variable dashboard for production
# 5. Test your configuration with /status command in Telegram